<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pflegeplanung Master | PflegefachProfi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --primary-light: #eef2ff;
            --secondary: #7209b7;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #fca311;
            --danger: #e63946;
            --coin: #ffd166;
            --text-primary: #1d3557;
            --text-secondary: #457b9d;
            --text-tertiary: #a8dadc;
            --background: #f1faee;
            --surface: #ffffff;
            --border: #e0e0e0;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-elevated: 0 8px 24px rgba(0, 0, 0, 0.12);
            --radius: 12px;
            --radius-lg: 20px;
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 32px;
            --spacing-xl: 48px;
            --spacing-xxl: 64px;
            --font-primary: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            color: var(--text-primary);
            background-color: var(--background);
            line-height: 1.6;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        /* ===== NAVIGATION BAR ===== */
        .navbar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: var(--spacing-sm) 0;
            box-shadow: var(--shadow-elevated);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 800;
            font-size: 1.5rem;
            color: white;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: var(--spacing-md);
            align-items: center;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .nav-link i {
            font-size: 1.1rem;
        }

        .nav-cta {
            background: var(--accent);
            color: white;
            padding: var(--spacing-xs) var(--spacing-lg);
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(247, 37, 133, 0.4);
        }

        .nav-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(247, 37, 133, 0.5);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: white;
            margin: 3px 0;
            transition: 0.3s;
        }

        /* ===== ECONOMY STATS BAR ===== */
        .user-stats {
            display: flex;
            gap: var(--spacing-lg);
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 7px;
            background: var(--primary-light);
            padding: 14px 18px;
            border-radius: var(--radius);
            font-weight: 900;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .coins {
            background: linear-gradient(135deg, var(--coin) 0%, #ffb347 100%);
            color: var(--text-primary);
        }

        .level {
            background: var(--primary);
            color: white;
        }

        .xp {
            background: var(--success);
            color: white;
        }

        /* Hero Section */
        .hero {
            padding: var(--spacing-xxl) 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            text-align: center;
            margin: 0 auto;
        }

        .hero h1 {
            color: white;
            margin-bottom: var(--spacing-md);
            font-size: 2.5rem;
        }

        .hero p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.25rem;
            margin-bottom: var(--spacing-xl);
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--accent);
            color: white;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius);
            font-weight: 700;
            text-decoration: none;
            box-shadow: var(--shadow-elevated);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .cta-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(247, 37, 133, 0.4);
        }

        /* Modules Dashboard */
        .dashboard {
            padding: var(--spacing-xl) 0;
            background: var(--background);
        }

        .section-title {
            text-align: center;
            margin-bottom: var(--spacing-lg);
            font-size: 2rem;
            color: var(--text-primary);
        }

        .section-subtitle {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            color: var(--text-secondary);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .module-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
        }

        .module-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-elevated);
            border-color: var(--primary-light);
        }

        .module-card.locked {
            opacity: 0.7;
            filter: grayscale(0.5);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
        }

        .module-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .module-cost {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--coin);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .module-title {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
        }

        .module-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
            font-size: 0.9rem;
        }

        .module-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .module-action {
            width: 100%;
            padding: var(--spacing-md);
            border: none;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .module-action.unlock {
            background: var(--primary);
            color: white;
        }

        .module-action.unlock:hover {
            background: var(--primary-dark);
        }

        .module-action.start {
            background: var(--success);
            color: white;
        }

        .module-action.start:hover {
            background: #3ab0d9;
        }

        .module-action.continue {
            background: var(--accent);
            color: white;
        }

        .module-action.continue:hover {
            background: #e1156d;
        }

        /* Module Content Sections */
        .module-content {
            display: none;
            padding: var(--spacing-xl) 0;
            background: var(--surface);
            min-height: 100vh;
        }

        .module-content.active {
            display: block;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--primary);
            color: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: var(--spacing-lg);
        }

        .back-button:hover {
            background: var(--primary-dark);
        }

        /* Module 1: Interactive PESR Diagram */
        .pesr-diagram {
            max-width: 800px;
            margin: 0 auto var(--spacing-xl);
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
        }

        .pesr-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        @media (max-width: 768px) {
            .pesr-grid {
                grid-template-columns: 1fr;
            }
        }

        .pesr-component {
            background: var(--primary-light);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            border-left: 4px solid var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pesr-component:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .pesr-component.problem {
            border-left-color: var(--danger);
            background: rgba(230, 57, 70, 0.1);
        }

        .pesr-component.atiologie {
            border-left-color: var(--warning);
            background: rgba(252, 163, 17, 0.1);
        }

        .pesr-component.symptome {
            border-left-color: var(--success);
            background: rgba(76, 201, 240, 0.1);
        }

        .pesr-component.ressourcen {
            border-left-color: var(--secondary);
            background: rgba(114, 9, 183, 0.1);
        }

        .pesr-label {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: var(--spacing-xs);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .pesr-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* SMART Checker */
        .smart-checker {
            max-width: 800px;
            margin: 0 auto;
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
        }

        .smart-input {
            width: 100%;
            padding: var(--spacing-md);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            margin-bottom: var(--spacing-md);
            resize: vertical;
            min-height: 100px;
        }

        .smart-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .smart-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        .smart-criterion {
            text-align: center;
            padding: var(--spacing-md);
            border-radius: var(--radius);
            background: var(--primary-light);
        }

        .smart-criterion.valid {
            background: rgba(76, 201, 240, 0.2);
            border: 1px solid var(--success);
        }

        .smart-criterion.invalid {
            background: rgba(230, 57, 70, 0.1);
            border: 1px solid var(--danger);
        }

        .smart-icon {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-xs);
        }

        /* 7W Maßnahmen Builder */
        .massnahmen-builder {
            max-width: 800px;
            margin: 0 auto;
        }

        .builder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .builder-input {
            padding: var(--spacing-md);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 0.9rem;
        }

        .builder-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .massnahmen-preview {
            background: var(--primary-light);
            padding: var(--spacing-lg);
            border-radius: var(--radius);
            margin-top: var(--spacing-lg);
            border-left: 4px solid var(--primary);
        }

        /* Module 2: Baustein Trainer */
        .trainer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .trainer-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            border: 2px solid transparent;
        }

        .trainer-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-elevated);
            border-color: var(--primary-light);
        }

        .trainer-icon {
            width: 80px;
            height: 80px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 2rem;
            margin: 0 auto var(--spacing-md);
        }

        .trainer-title {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-sm);
        }

        .trainer-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
            font-size: 0.9rem;
        }

        /* Matching Game */
        .matching-game {
            max-width: 900px;
            margin: 0 auto;
        }

        .matching-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        @media (max-width: 768px) {
            .matching-area {
                grid-template-columns: 1fr;
            }
        }

        .matching-column {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .matching-item {
            background: var(--primary-light);
            padding: var(--spacing-md);
            border-radius: var(--radius);
            cursor: grab;
            border: 2px dashed var(--primary);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .matching-item.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .matching-target {
            background: var(--surface);
            padding: var(--spacing-md);
            border-radius: var(--radius);
            border: 2px solid var(--border);
            min-height: 80px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .matching-target.hover {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .matching-target.correct {
            background: rgba(76, 201, 240, 0.1);
            border-color: var(--success);
        }

        .matching-target.incorrect {
            background: rgba(230, 57, 70, 0.1);
            border-color: var(--danger);
        }

        /* Module 3: Simulator */
        .simulator {
            max-width: 1000px;
            margin: 0 auto;
        }

        .case-study {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow);
            margin-bottom: var(--spacing-lg);
        }

        .case-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
        }

        .case-title {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-sm);
        }

        .case-description {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: var(--spacing-lg);
        }

        .simulator-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
            position: relative;
        }

        .simulator-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border);
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: var(--primary);
            color: white;
        }

        .step.completed .step-number {
            background: var(--success);
            color: white;
        }

        .step-label {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .pesr-form {
            display: grid;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .form-label {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .form-input {
            padding: var(--spacing-md);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .feedback-panel {
            padding: var(--spacing-md);
            border-radius: var(--radius);
            margin-top: var(--spacing-md);
            display: none;
        }

        .feedback-panel.correct {
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
            display: block;
        }

        .feedback-panel.incorrect {
            background: rgba(230, 57, 70, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
            display: block;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-lg);
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--primary);
            color: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--primary-dark);
        }

        .nav-btn:disabled {
            background: var(--border);
            cursor: not-allowed;
        }

        /* Results Screen */
        .results-screen {
            display: none;
            text-align: center;
            padding: var(--spacing-xl);
            animation: fadeIn 0.8s ease;
        }

        .results-screen.active {
            display: block;
        }

        .result-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-md);
        }

        .result-icon.correct {
            color: var(--success);
        }

        .result-score {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
        }

        .result-score.good {
            color: var(--success);
        }

        .result-score.average {
            color: var(--warning);
        }

        .result-score.poor {
            color: var(--danger);
        }

        .reward-animation {
            display: flex;
            justify-content: center;
            gap: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }

        .reward-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .reward-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }

        .reward-icon.coins {
            background: var(--coin);
            color: var(--text-primary);
        }

        .reward-icon.xp {
            background: var(--success);
            color: white;
        }

        .reward-amount {
            font-weight: 700;
            font-size: 1.25rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Footer */
        .footer {
            background: var(--text-primary);
            color: white;
            padding: var(--spacing-lg) 0;
            margin-top: auto;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .footer-logo {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .footer-links {
            display: flex;
            gap: var(--spacing-lg);
            flex-wrap: wrap;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            color: white;
        }

        .footer-copyright {
            width: 100%;
            text-align: center;
            margin-top: var(--spacing-md);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.875rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
            
            .nav-menu {
                position: fixed;
                left: -100%;
                top: 70px;
                flex-direction: column;
                background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
                width: 100%;
                text-align: center;
                transition: 0.3s;
                box-shadow: var(--shadow-elevated);
                padding: var(--spacing-lg) 0;
                gap: 0;
            }
            
            .user-stats {
                gap: 8px;
            }
            
            .stat-item {
                padding: 4px 8px;
                font-size: 0.75rem;
            }
            
            .stat-item i {
                font-size: 0.7rem;
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .nav-item {
                margin: var(--spacing-sm) 0;
                width: 100%;
            }
            
            .nav-link {
                justify-content: center;
                padding: var(--spacing-md);
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }

            .simulator-steps {
                flex-wrap: wrap;
                gap: var(--spacing-md);
            }

            .simulator-steps::before {
                display: none;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: var(--spacing-xl) 0;
            }
            
            .hero h1 {
                font-size: 1.75rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .user-stats {
                gap: 4px;
            }
            
            .stat-item {
                padding: 3px 6px;
                font-size: 0.7rem;
            }
            
            .cta-button {
                padding: var(--spacing-sm) var(--spacing-lg);
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-stethoscope"></i>
                </div>
                <span>PflegefachProfi</span>
            </a>
            
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item">
                    <a href="lernmodule.html" class="nav-link active">
                        <i class="fas fa-book-medical"></i>
                        Lernmodule
                    </a>
                </li>
                <li class="nav-item">
                    <a href="lernspiele.html" class="nav-link">
                        <i class="fas fa-gamepad"></i>
                        Lernspiele
                    </a>
                </li>
                <li class="nav-item">
                    <a href="fallbeispiele.html" class="nav-link">
                        <i class="fas fa-procedures"></i>
                        Fallbeispiele
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#modules-grid" class="nav-link nav-cta">
                        <i class="fas fa-rocket"></i>
                        Jetzt lernen
                    </a>
                </li>
            </ul>

            <div class="user-stats">
                <div class="stat-item coins">
                    <i class="fas fa-coins"></i>
                    <span id="coins">100</span>
                </div>
                <div class="stat-item level">
                    <i class="fas fa-level-up-alt"></i>
                    <span id="level">1</span>
                </div>
                <div class="stat-item xp">
                    <i class="fas fa-fire"></i>
                    <span id="xp">0</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Pflegeplanung Master</h1>
                <p>Lerne professionelle Pflegeplanung nach PESR, SMART und 7W-Regeln mit interaktiven Übungen!</p>
                <button class="cta-button" id="start-learning">
                    <i class="fas fa-play"></i>
                    Jetzt starten
                </button>
            </div>
        </div>
    </section>

    <!-- Modules Dashboard -->
    <section class="dashboard" id="dashboard">
        <div class="container">
            <h2 class="section-title">Lernmodule</h2>
            <p class="section-subtitle">Wähle ein Modul aus und meistere die Pflegeplanung Schritt für Schritt</p>
            
            <div class="modules-grid" id="modules-grid">
                <!-- Modules will be loaded by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Module 1: Das Fundament -->
    <section class="module-content" id="module-1">
        <div class="container">
            <button class="back-button" id="back-to-modules-1">
                <i class="fas fa-arrow-left"></i>
                Zurück zu Modulen
            </button>
            
            <h2 class="section-title">Modul 1: Das Fundament</h2>
            <p class="section-subtitle">Lerne die Grundlagen der Pflegeplanung mit PESR, SMART und 7W</p>

            <!-- PESR Diagram -->
            <div class="pesr-diagram">
                <h3>Das PESR-Schema</h3>
                <p>Die Basis jeder Pflegediagnose besteht aus vier Komponenten:</p>
                
                <div class="pesr-grid">
                    <div class="pesr-component problem" data-component="problem">
                        <div class="pesr-label">
                            <i class="fas fa-exclamation-circle"></i>
                            P - Problem
                        </div>
                        <div class="pesr-description">
                            Das Hauptproblem der zu pflegenden Person wird klar benannt.
                        </div>
                    </div>
                    
                    <div class="pesr-component atiologie" data-component="atiologie">
                        <div class="pesr-label">
                            <i class="fas fa-search"></i>
                            E - Ätiologie
                        </div>
                        <div class="pesr-description">
                            Die Ursachen und Einflussfaktoren des Problems.
                        </div>
                    </div>
                    
                    <div class="pesr-component symptome" data-component="symptome">
                        <div class="pesr-label">
                            <i class="fas fa-clipboard-list"></i>
                            S - Symptome
                        </div>
                        <div class="pesr-description">
                            Wie sich das Problem konkret äußert (beobachtbare Anzeichen).
                        </div>
                    </div>
                    
                    <div class="pesr-component ressourcen" data-component="ressourcen">
                        <div class="pesr-label">
                            <i class="fas fa-hand-holding-heart"></i>
                            R - Ressourcen
                        </div>
                        <div class="pesr-description">
                            Fähigkeiten und Hilfsmittel der Person zur Problemlösung.
                        </div>
                    </div>
                </div>
            </div>

            <!-- SMART Checker -->
            <div class="smart-checker">
                <h3>SMART-Ziele Checker</h3>
                <p>Überprüfe deine Zielformulierungen nach den SMART-Kriterien:</p>
                
                <textarea class="smart-input" id="smart-input" placeholder="Gib dein Pflegeziel hier ein (im Passiv Perfekt)..."></textarea>
                <button class="cta-button" id="check-smart">
                    <i class="fas fa-check"></i>
                    Ziel überprüfen
                </button>
                
                <div class="smart-results" id="smart-results">
                    <div class="smart-criterion" data-criterion="spezifisch">
                        <div class="smart-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="stat-value">Spezifisch</div>
                        <div class="stat-label">Eindeutig formuliert</div>
                    </div>
                    
                    <div class="smart-criterion" data-criterion="messbar">
                        <div class="smart-icon">
                            <i class="fas fa-ruler"></i>
                        </div>
                        <div class="stat-value">Messbar</div>
                        <div class="stat-label">Überprüfbar</div>
                    </div>
                    
                    <div class="smart-criterion" data-criterion="attraktiv">
                        <div class="smart-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-value">Attraktiv</div>
                        <div class="stat-label">Akzeptiert</div>
                    </div>
                    
                    <div class="smart-criterion" data-criterion="realistisch">
                        <div class="smart-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="stat-value">Realistisch</div>
                        <div class="stat-label">Erreichbar</div>
                    </div>
                    
                    <div class="smart-criterion" data-criterion="terminiert">
                        <div class="smart-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-value">Terminiert</div>
                        <div class="stat-label">Zeitlich festgelegt</div>
                    </div>
                </div>
            </div>

            <!-- 7W Maßnahmen Builder -->
            <div class="massnahmen-builder">
                <h3>7W-Maßnahmen Builder</h3>
                <p>Erstelle vollständige Maßnahmen nach der 7W-Regel:</p>
                
                <div class="builder-grid">
                    <input type="text" class="builder-input" id="builder-wer" placeholder="Wer (Pflegekraft)">
                    <input type="text" class="builder-input" id="builder-was" placeholder="Was (Handlung)">
                    <input type="text" class="builder-input" id="builder-wann" placeholder="Wann (Zeitpunkt)">
                    <input type="text" class="builder-input" id="builder-wie" placeholder="Wie (Methode)">
                    <input type="text" class="builder-input" id="builder-wo" placeholder="Wo (Ort)">
                    <input type="text" class="builder-input" id="builder-wie-oft" placeholder="Wie oft (Frequenz)">
                    <input type="text" class="builder-input" id="builder-womit" placeholder="Womit (Hilfsmittel)">
                </div>
                
                <button class="cta-button" id="generate-massnahme">
                    <i class="fas fa-magic"></i>
                    Maßnahme generieren
                </button>
                
                <div class="massnahmen-preview" id="massnahmen-preview">
                    Deine generierte Maßnahme erscheint hier...
                </div>
            </div>
        </div>
    </section>

    <!-- Module 2: Baustein Trainer -->
    <section class="module-content" id="module-2">
        <div class="container">
            <button class="back-button" id="back-to-modules-2">
                <i class="fas fa-arrow-left"></i>
                Zurück zu Modulen
            </button>
            
            <h2 class="section-title">Modul 2: Der Baustein-Trainer</h2>
            <p class="section-subtitle">Übe jede Komponente der Pflegeplanung isoliert</p>

            <div class="trainer-grid">
                <div class="trainer-card" data-trainer="problem-katalog">
                    <div class="trainer-icon">
                        <i class="fas fa-list-alt"></i>
                    </div>
                    <h3 class="trainer-title">Problem-Katalog</h3>
                    <p class="trainer-description">Lerne die 20 häufigsten Pflegeprobleme und ihre korrekten Formulierungen.</p>
                </div>

                <div class="trainer-card" data-trainer="matching-game">
                    <div class="trainer-icon">
                        <i class="fas fa-puzzle-piece"></i>
                    </div>
                    <h3 class="trainer-title">Ursachen & Symptome</h3>
                    <p class="trainer-description">Verbinde Pflegeprobleme mit ihren Ursachen und Symptomen.</p>
                </div>

                <div class="trainer-card" data-trainer="ressourcen-detektiv">
                    <div class="trainer-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 class="trainer-title">Ressourcen-Detektiv</h3>
                    <p class="trainer-description">Erkunde Fallbeispiele und identifiziere patienteneigene Ressourcen.</p>
                </div>

                <div class="trainer-card" data-trainer="smart-checker">
                    <div class="trainer-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <h3 class="trainer-title">Ziel-Checker</h3>
                    <p class="trainer-description">Überprüfe Zielformulierungen auf SMART-Konformität.</p>
                </div>

                <div class="trainer-card" data-trainer="massnahmen-labor">
                    <div class="trainer-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h3 class="trainer-title">Maßnahmen-Labor</h3>
                    <p class="trainer-description">Erstelle und optimiere Pflegemaßnahmen nach der 7W-Regel.</p>
                </div>
            </div>

            <!-- Matching Game (example content) -->
            <div class="matching-game" id="matching-game-content" style="display: none;">
                <h3>Ursachen & Symptome Matching</h3>
                <p>Ziehe die Symptome zu den richtigen Pflegeproblemen:</p>
                
                <div class="matching-area">
                    <div class="matching-column" id="problems-column">
                        <div class="matching-item" data-problem="Sturzgefahr">Sturzgefahr</div>
                        <div class="matching-item" data-problem="Schmerzen">Akute Schmerzen</div>
                        <div class="matching-item" data-problem="Dekubitus">Dekubitusrisiko</div>
                    </div>
                    
                    <div class="matching-column" id="symptoms-column">
                        <div class="matching-target" data-correct="Sturzgefahr">Unsicherer Gang, Schwindel</div>
                        <div class="matching-target" data-correct="Schmerzen">Schonhaltung, Gesichtsverzerrung</div>
                        <div class="matching-target" data-correct="Dekubitus">Rötung am Sakrum, Immobilität</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Module 3: Pflegeplanungs-Simulator -->
    <section class="module-content" id="module-3">
        <div class="container">
            <button class="back-button" id="back-to-modules-3">
                <i class="fas fa-arrow-left"></i>
                Zurück zu Modulen
            </button>
            
            <h2 class="section-title">Modul 3: Der Pflegeplanungs-Simulator</h2>
            <p class="section-subtitle">Wende dein Wissen in realistischen Fallbeispielen an</p>

            <div class="simulator">
                <div class="case-study">
                    <div class="case-header">
                        <h3 class="case-title">Fallbeispiel: Herr Müller</h3>
                    </div>
                    
                    <div class="case-description">
                        <p><strong>Patient:</strong> Herr Müller, 78 Jahre</p>
                        <p><strong>Situation:</strong> Postoperativ nach Hüft-OP, eingeschränkte Mobilität, Schmerzen, Sturzgefahr</p>
                        <p><strong>Assessment:</strong> Unsicherer Gang, Schonhaltung, kann Bett nicht selbstständig verlassen, ist orientiert und motiviert</p>
                    </div>

                    <div class="simulator-steps">
                        <div class="step active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-label">PESR</div>
                        </div>
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-label">Ziele</div>
                        </div>
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-label">Maßnahmen</div>
                        </div>
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-label">Evaluation</div>
                        </div>
                    </div>

                    <!-- Step 1: PESR -->
                    <div class="step-content active" data-step="1">
                        <h4>Pflegediagnose erstellen (PESR)</h4>
                        
                        <div class="pesr-form">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-exclamation-circle"></i>
                                    P - Problem
                                </label>
                                <input type="text" class="form-input" id="input-problem" placeholder="z.B. Sturzgefahr, Schmerzen...">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-search"></i>
                                    E - Ätiologie
                                </label>
                                <input type="text" class="form-input" id="input-atiologie" placeholder="Ursachen des Problems...">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-clipboard-list"></i>
                                    S - Symptome
                                </label>
                                <input type="text" class="form-input" id="input-symptome" placeholder="Beobachtbare Anzeichen...">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-hand-holding-heart"></i>
                                    R - Ressourcen
                                </label>
                                <input type="text" class="form-input" id="input-ressourcen" placeholder="Fähigkeiten des Patienten...">
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="pesr-feedback"></div>
                        
                        <div class="navigation-buttons">
                            <button class="nav-btn" id="prev-step-1" disabled>
                                <i class="fas fa-arrow-left"></i>
                                Zurück
                            </button>
                            <button class="nav-btn" id="next-step-1">
                                Weiter zu Zielen
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Ziele -->
                    <div class="step-content" data-step="2">
                        <h4>SMART-Ziele formulieren</h4>
                        
                        <div class="pesr-form">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-bullseye"></i>
                                    Nahziel (kurzfristig)
                                </label>
                                <input type="text" class="form-input" id="input-nahziel" placeholder="Im Passiv Perfekt, z.B. Der Patient hat...">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-flag"></i>
                                    Fernziel (langfristig)
                                </label>
                                <input type="text" class="form-input" id="input-fernziel" placeholder="Im Passiv Perfekt, z.B. Der Patient ist...">
                            </div>
                        </div>
                        
                        <div class="feedback-panel" id="ziel-feedback"></div>
                        
                        <div class="navigation-buttons">
                            <button class="nav-btn" id="prev-step-2">
                                <i class="fas fa-arrow-left"></i>
                                Zurück zu PESR
                            </button>
                            <button class="nav-btn" id="next-step-2">
                                Weiter zu Maßnahmen
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Additional steps would continue here... -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">PflegefachProfi - Pflegeplanung</div>
                <div class="footer-links">
                    <a href="index.html" class="footer-link">Startseite</a>
                    <a href="datenschutz.html" class="footer-link">Datenschutz</a>
                    <a href="impressum.html" class="footer-link">Impressum</a>
                    <a href="kontakt.html" class="footer-link">Kontakt</a>
                </div>
                <div class="footer-copyright">
                    &copy; 2024 PflegefachProfi. Alle Rechte vorbehalten.
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ===============================
        // DATA STRUCTURES
        // ===============================

        // User data structure
        let user = {
            coins: 100,
            xp: 0,
            level: 1,
            unlockedModules: ['module-1'], // First module is always unlocked
            progress: {}
        };

        // Module data
        const modules = {
            'module-1': {
                title: 'Das Fundament',
                description: 'Lerne PESR, SMART und 7W - die Grundlagen der Pflegeplanung',
                icon: 'fas fa-layer-group',
                cost: 0, // First module is free
                color: '#4361ee',
                completed: false
            },
            'module-2': {
                title: 'Baustein-Trainer',
                description: 'Übe jede Komponente isoliert mit interaktiven Übungen',
                icon: 'fas fa-puzzle-piece',
                cost: 50,
                color: '#7209b7',
                completed: false
            },
            'module-3': {
                title: 'Pflegeplanungs-Simulator',
                description: 'Wende dein Wissen in realistischen Fallbeispielen an',
                icon: 'fas fa-user-md',
                cost: 75,
                color: '#f72585',
                completed: false
            }
        };

        // Sample data for exercises
        const trainingData = {
            problems: [
                {
                    problem: 'Sturzgefahr',
                    atiologie: 'Muskelschwäche, Schwindel, postoperative Einschränkungen',
                    symptome: 'Unsicherer Gang, Schwanken, benötigt Hilfe beim Aufstehen',
                    ressourcen: 'Ist orientiert, kann um Hilfe rufen, motiviert zur Mobilisation'
                },
                {
                    problem: 'Akute Schmerzen',
                    atiologie: 'Postoperativer Zustand nach Hüft-OP',
                    symptome: 'Schonhaltung, Gesichtsverzerrung, Ruhelosigkeit',
                    ressourcen: 'Kann Schmerzen auf Skala beschreiben, kooperativ'
                }
            ],
            smartExamples: {
                valid: [
                    'Der Patient ist in 3 Tagen 10 Meter mit dem Gehstock gegangen.',
                    'Die Schmerzintensität ist innerhalb von 30 Minuten von 8/10 auf 4/10 reduziert worden.',
                    'Der Patient hat sich in 2 Wochen selbstständig gewaschen.'
                ],
                invalid: [
                    'Der Patient soll weniger Schmerzen haben.',
                    'Mobilisation verbessern.',
                    'Der Patient nimmt regelmäßig Schmerzmittel.'
                ]
            }
        };

        // ===============================
        // UTILITY FUNCTIONS
        // ===============================

        // Cookie management
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Save and load user data
        function saveUserData() {
            setCookie('pflegeplanungUser', JSON.stringify(user), 30);
        }

        function loadUserData() {
            const userData = getCookie('pflegeplanungUser');
            if (userData) {
                user = JSON.parse(userData);
            }
            updateUserStats();
        }

        // Update UI with user stats
        function updateUserStats() {
            document.getElementById('coins').textContent = user.coins;
            document.getElementById('level').textContent = user.level;
            document.getElementById('xp').textContent = user.xp;
        }

        // Calculate level based on XP
        function calculateLevel() {
            const newLevel = Math.floor(user.xp / 100) + 1;
            if (newLevel > user.level) {
                user.level = newLevel;
                // Could add level up celebration here
            }
        }

        // Add XP and coins
        function addReward(coins, xp) {
            user.coins += coins;
            user.xp += xp;
            calculateLevel();
            updateUserStats();
            saveUserData();
        }

        // Show confetti animation
        function showConfetti() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });
        }

        // ===============================
        // NAVIGATION FUNCTIONALITY
        // ===============================

        function initializeNavigation() {
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');
            
            hamburger.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
            
            // Close menu when clicking on a link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                });
            });
        }

        // ===============================
        // DASHBOARD FUNCTIONALITY
        // ===============================

        let currentModule = '';

        function initializeDashboard() {
            loadUserData();
            initializeNavigation();
            renderModules();
            
            // Event listeners
            document.getElementById('start-learning').addEventListener('click', () => {
                document.getElementById('modules-grid').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Back buttons
            document.getElementById('back-to-modules-1').addEventListener('click', showDashboard);
            document.getElementById('back-to-modules-2').addEventListener('click', showDashboard);
            document.getElementById('back-to-modules-3').addEventListener('click', showDashboard);
            
            // Initialize module functionalities
            initializeModule1();
            initializeModule2();
            initializeModule3();
        }

        function renderModules() {
            const grid = document.getElementById('modules-grid');
            grid.innerHTML = '';
            
            for (const [moduleId, moduleData] of Object.entries(modules)) {
                const isUnlocked = user.unlockedModules.includes(moduleId);
                const progress = user.progress[moduleId] || 0;
                
                const card = document.createElement('div');
                card.className = `module-card ${isUnlocked ? '' : 'locked'}`;
                card.style.borderLeftColor = moduleData.color;
                
                card.innerHTML = `
                    <div class="module-header">
                        <div class="module-icon" style="background: ${moduleData.color}20; color: ${moduleData.color}">
                            <i class="${moduleData.icon}"></i>
                        </div>
                        ${!isUnlocked ? `
                        <div class="module-cost">
                            <i class="fas fa-coins"></i>
                            <span>${moduleData.cost}</span>
                        </div>
                        ` : ''}
                    </div>
                    <h3 class="module-title">${moduleData.title}</h3>
                    <p class="module-description">${moduleData.description}</p>
                    <div class="module-stats">
                        <div class="stat">
                            <span class="stat-value">${progress}%</span>
                            <span class="stat-label">Fortschritt</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">${moduleId === 'module-1' ? '3' : moduleId === 'module-2' ? '5' : '4'}</span>
                            <span class="stat-label">Lektionen</span>
                        </div>
                    </div>
                    <button class="module-action ${isUnlocked ? (moduleData.completed ? 'continue' : 'start') : 'unlock'}" 
                            data-module="${moduleId}">
                        <i class="fas fa-${isUnlocked ? (moduleData.completed ? 'redo' : 'play') : 'lock'}"></i>
                        ${isUnlocked ? (moduleData.completed ? 'Wiederholen' : 'Starten') : 'Freischalten'}
                    </button>
                `;
                
                grid.appendChild(card);
            }
            
            // Add event listeners to module buttons
            document.querySelectorAll('.module-action.unlock').forEach(button => {
                button.addEventListener('click', function() {
                    const moduleId = this.getAttribute('data-module');
                    unlockModule(moduleId);
                });
            });
            
            document.querySelectorAll('.module-action.start, .module-action.continue').forEach(button => {
                button.addEventListener('click', function() {
                    const moduleId = this.getAttribute('data-module');
                    selectModule(moduleId);
                });
            });
        }

        function unlockModule(moduleId) {
            const module = modules[moduleId];
            if (user.coins >= module.cost) {
                user.coins -= module.cost;
                user.unlockedModules.push(moduleId);
                saveUserData();
                updateUserStats();
                renderModules();
                
                // Show success message
                alert(`Glückwunsch! Du hast das Modul "${module.title}" freigeschaltet.`);
            } else {
                alert(`Du hast nicht genug Coins. Du benötigst ${module.cost} Coins.`);
            }
        }

        function selectModule(moduleId) {
            currentModule = moduleId;
            showModule(moduleId);
        }

        function showDashboard() {
            document.getElementById('dashboard').style.display = 'block';
            document.getElementById('module-1').classList.remove('active');
            document.getElementById('module-2').classList.remove('active');
            document.getElementById('module-3').classList.remove('active');
        }

        function showModule(moduleId) {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('module-1').classList.remove('active');
            document.getElementById('module-2').classList.remove('active');
            document.getElementById('module-3').classList.remove('active');
            
            document.getElementById(moduleId).classList.add('active');
        }

        // ===============================
        // MODULE 1: DAS FUNDAMENT
        // ===============================

        function initializeModule1() {
            // PESR Component Click Handlers
            document.querySelectorAll('.pesr-component').forEach(component => {
                component.addEventListener('click', function() {
                    const componentType = this.getAttribute('data-component');
                    showPESRDetails(componentType);
                });
            });
            
            // SMART Checker
            document.getElementById('check-smart').addEventListener('click', checkSMARTGoal);
            
            // 7W Maßnahmen Builder
            document.getElementById('generate-massnahme').addEventListener('click', generateMassnahme);
        }

        function showPESRDetails(componentType) {
            const details = {
                'problem': {
                    title: 'P - Problem',
                    rules: [
                        'Muss ein Pflegeproblem sein (kein medizinisches Problem)',
                        'Wird klar und einheitlich benannt',
                        'Bezieht sich auf die aktuelle Situation',
                        'Beispiele: "Sturzgefahr", "Selbstpflegedefizit", "Akute Schmerzen"'
                    ]
                },
                'atiologie': {
                    title: 'E - Ätiologie',
                    rules: [
                        'Beschreibt die Ursache(n) des Problems',
                        'Muss logisch zum Problem passen',
                        'Maßnahmen setzen an der Ätiologie an',
                        'Beispiele: "Muskelschwäche", "Postoperativer Zustand", "Eingeschränkte Gelenkbeweglichkeit"'
                    ]
                },
                'symptome': {
                    title: 'S - Symptome',
                    rules: [
                        'Beobachtbare Anzeichen, die das Problem belegen',
                        'Müssen validierbar sein ("Wenn Symptome weg, dann Problem weg")',
                        'Können subjektive Äußerungen des Patienten sein',
                        'Beispiele: "Unsicherer Gang", "Schonhaltung", "Gesichtsverzerrung"'
                    ]
                },
                'ressourcen': {
                    title: 'R - Ressourcen',
                    rules: [
                        'Fähigkeiten, Kenntnisse und Hilfsmittel der Person',
                        'Müssen in die Planung einfließen',
                        'Ressourcenorientierung ist Pflicht',
                        'Beispiele: "Ist orientiert", "Motiviert", "Kann um Hilfe rufen"'
                    ]
                }
            };
            
            const detail = details[componentType];
            let message = `<strong>${detail.title}</strong>\n\n`;
            message += detail.rules.join('\n• ');
            
            alert(message);
        }

        function checkSMARTGoal() {
            const goal = document.getElementById('smart-input').value.trim();
            const results = document.getElementById('smart-results');
            const criteria = results.querySelectorAll('.smart-criterion');
            
            // Reset all criteria
            criteria.forEach(criterion => {
                criterion.classList.remove('valid', 'invalid');
            });
            
            if (!goal) {
                alert('Bitte gib ein Ziel zur Überprüfung ein.');
                return;
            }
            
            // Check each SMART criterion
            const checks = {
                'spezifisch': checkSpecific(goal),
                'messbar': checkMeasurable(goal),
                'attraktiv': checkAttractive(goal),
                'realistisch': checkRealistic(goal),
                'terminiert': checkTimebound(goal)
            };
            
            // Update UI
            Object.entries(checks).forEach(([criterion, isValid]) => {
                const element = results.querySelector(`[data-criterion="${criterion}"]`);
                if (isValid) {
                    element.classList.add('valid');
                } else {
                    element.classList.add('invalid');
                }
            });
            
            // Calculate score
            const validCount = Object.values(checks).filter(Boolean).length;
            const score = (validCount / 5) * 100;
            
            // Provide feedback
            let feedback = `Dein Ziel erreicht ${score}% der SMART-Kriterien.\n\n`;
            if (score === 100) {
                feedback += "Perfekt! Dein Ziel ist vollständig SMART formuliert.";
                addReward(10, 20);
            } else if (score >= 60) {
                feedback += "Gut, aber es gibt noch Verbesserungspotenzial.";
                addReward(5, 10);
            } else {
                feedback += "Überarbeite dein Ziel mit Hilfe der farbigen Kriterien.";
            }
            
            alert(feedback);
        }

        function checkSpecific(text) {
            return text.length > 20 && 
                   !text.toLowerCase().includes('soll') && 
                   !text.toLowerCase().includes('muss');
        }

        function checkMeasurable(text) {
            const measurables = [/\d/, '%', 'selbstständig', 'ohne', 'mit', 'korrekt', 'Skala'];
            return measurables.some(pattern => 
                typeof pattern === 'string' ? text.includes(pattern) : pattern.test(text)
            );
        }

        function checkAttractive(text) {
            // This is harder to check automatically, so we'll be lenient
            return text.length > 10 && 
                   !text.toLowerCase().includes('nicht') &&
                   !text.toLowerCase().includes('kein');
        }

        function checkRealistic(text) {
            // Basic check - in real implementation, this would need more context
            return text.length > 15 && 
                   !text.toLowerCase().includes('sofort') &&
                   !text.toLowerCase().includes('komplett');
        }

        function checkTimebound(text) {
            const timePatterns = [/in \d+ (Tagen|Wochen|Stunden)/, /bis (\w+, )?\d{1,2}\.\d{1,2}/, /täglich|wöchentlich/];
            return timePatterns.some(pattern => pattern.test(text));
        }

        function generateMassnahme() {
            const elements = [
                document.getElementById('builder-wer').value || 'Die Pflegekraft',
                document.getElementById('builder-was').value || 'führt eine Maßnahme durch',
                document.getElementById('builder-wann').value || 'bei Bedarf',
                document.getElementById('builder-wie').value || 'sachgerecht',
                document.getElementById('builder-wo').value || 'im Patientenzimmer',
                document.getElementById('builder-wie-oft').value || 'regelmäßig',
                document.getElementById('builder-womit').value || 'mit geeigneten Hilfsmitteln'
            ];
            
            // Check if all 7W are filled
            const filledElements = elements.filter(el => el && el.trim() !== '');
            const completeness = (filledElements.length / 7) * 100;
            
            let massnahme = elements.join(' ');
            massnahme = massnahme.charAt(0).toUpperCase() + massnage.slice(1) + '.';
            
            document.getElementById('massnahmen-preview').textContent = massnahme;
            
            // Provide feedback on completeness
            if (completeness === 100) {
                document.getElementById('massnahmen-preview').style.borderLeftColor = 'var(--success)';
                addReward(5, 10);
            } else if (completeness >= 50) {
                document.getElementById('massnahmen-preview').style.borderLeftColor = 'var(--warning)';
                addReward(2, 5);
            } else {
                document.getElementById('massnahmen-preview').style.borderLeftColor = 'var(--danger)';
            }
        }

        // ===============================
        // MODULE 2: BAUSTEIN TRAINER
        // ===============================

        function initializeModule2() {
            // Trainer card click handlers
            document.querySelectorAll('.trainer-card').forEach(card => {
                card.addEventListener('click', function() {
                    const trainer = this.getAttribute('data-trainer');
                    startTrainer(trainer);
                });
            });
            
            // Initialize matching game
            initializeMatchingGame();
        }

        function startTrainer(trainerType) {
            switch(trainerType) {
                case 'matching-game':
                    document.getElementById('matching-game-content').style.display = 'block';
                    break;
                default:
                    alert(`Trainer "${trainerType}" wird gestartet...`);
                    // In a full implementation, each trainer would have its own UI
                    break;
            }
        }

        function initializeMatchingGame() {
            const terms = document.querySelectorAll('.matching-item');
            const targets = document.querySelectorAll('.matching-target');
            
            terms.forEach(term => {
                term.addEventListener('dragstart', handleDragStart);
                term.addEventListener('dragend', handleDragEnd);
            });
            
            targets.forEach(target => {
                target.addEventListener('dragover', handleDragOver);
                target.addEventListener('dragenter', handleDragEnter);
                target.addEventListener('dragleave', handleDragLeave);
                target.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.getAttribute('data-problem'));
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('hover');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('hover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('hover');
            
            const problem = e.dataTransfer.getData('text/plain');
            const correctProblem = e.target.getAttribute('data-correct');
            
            if (problem === correctProblem) {
                e.target.classList.add('correct');
                e.target.textContent = `✓ ${problem}`;
                
                // Find and hide the dragged term
                const draggedTerm = document.querySelector(`.matching-item[data-problem="${problem}"]`);
                draggedTerm.style.display = 'none';
                
                // Check if all matches are complete
                const remainingTerms = document.querySelectorAll('.matching-item:not([style*="display: none"])');
                if (remainingTerms.length === 0) {
                    setTimeout(() => {
                        alert('Glückwunsch! Alle Paare wurden korrekt zugeordnet.');
                        addReward(15, 25);
                    }, 500);
                }
            } else {
                e.target.classList.add('incorrect');
                setTimeout(() => {
                    e.target.classList.remove('incorrect');
                }, 1000);
            }
        }

        // ===============================
        // MODULE 3: SIMULATOR
        // ===============================

        function initializeModule3() {
            // Step navigation
            document.getElementById('next-step-1').addEventListener('click', () => navigateStep(1, 2));
            document.getElementById('prev-step-2').addEventListener('click', () => navigateStep(2, 1));
            document.getElementById('next-step-2').addEventListener('click', () => navigateStep(2, 3));
            
            // Form validation
            document.getElementById('input-problem').addEventListener('blur', validatePESR);
            document.getElementById('input-atiologie').addEventListener('blur', validatePESR);
            document.getElementById('input-symptome').addEventListener('blur', validatePESR);
            document.getElementById('input-ressourcen').addEventListener('blur', validatePESR);
        }

        function navigateStep(from, to) {
            // Update steps visual
            document.querySelector(`.step[data-step="${from}"]`).classList.remove('active');
            document.querySelector(`.step[data-step="${to}"]`).classList.add('active');
            
            // Update content
            document.querySelector(`.step-content[data-step="${from}"]`).classList.remove('active');
            document.querySelector(`.step-content[data-step="${to}"]`).classList.add('active');
        }

        function validatePESR() {
            const problem = document.getElementById('input-problem').value;
            const atiologie = document.getElementById('input-atiologie').value;
            const symptome = document.getElementById('input-symptome').value;
            const ressourcen = document.getElementById('input-ressourcen').value;
            
            const feedback = document.getElementById('pesr-feedback');
            
            if (problem && atiologie && symptome && ressourcen) {
                // Basic validation - in real implementation, this would be more sophisticated
                feedback.textContent = '✓ PESR scheint logisch und vollständig. Gut gemacht!';
                feedback.className = 'feedback-panel correct';
                document.getElementById('next-step-1').disabled = false;
            } else {
                feedback.textContent = 'Bitte fülle alle PESR-Felder aus.';
                feedback.className = 'feedback-panel incorrect';
                document.getElementById('next-step-1').disabled = true;
            }
        }

        // ===============================
        // INITIALIZATION
        // ===============================

        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
        });
    </script>
</body>
</html>
